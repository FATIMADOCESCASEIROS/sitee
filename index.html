<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Desvie das Bolas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    background: #0f172a;
    color: #fff;
    font-family: Arial, sans-serif;
    text-align: center;
  }
  h1 {
    margin: 10px 0;
    color: #22c55e;
  }
  canvas {
    background: #020617;
    display: block;
    margin: auto;
    border: 2px solid #22c55e;
  }
  button {
    margin: 10px;
    padding: 12px 25px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    background: #22c55e;
    cursor: pointer;
  }
</style>
</head>

<body>

<h1>ðŸŽ® Desvie das Bolas</h1>
<p>Pontos: <span id="score">0</span></p>

<canvas id="game" width="360" height="500"></canvas>
<br>
<button onclick="iniciar()">Iniciar / Reiniciar</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let jogador, bolas, score, velocidade, ativo;

function iniciar() {
  jogador = { x: 160, y: 430, w: 40, h: 40 };
  bolas = [];
  score = 0;
  velocidade = 2;
  ativo = true;
  document.getElementById("score").innerText = score;
  loop();
}

function criarBola() {
  const raio = 12 + Math.random() * 10;
  bolas.push({
    x: Math.random() * (canvas.width - raio * 2) + raio,
    y: -raio,
    r: raio
  });
}

function colisao(b, j) {
  return (
    b.x > j.x &&
    b.x < j.x + j.w &&
    b.y + b.r > j.y &&
    b.y - b.r < j.y + j.h
  );
}

function loop() {
  if (!ativo) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Jogador
  ctx.fillStyle = "#22c55e";
  ctx.fillRect(jogador.x, jogador.y, jogador.w, jogador.h);

  // Bolas
  ctx.fillStyle = "#ef4444";
  bolas.forEach(b => {
    b.y += velocidade;
    ctx.beginPath();
    ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
    ctx.fill();

    if (colisao(b, jogador)) {
      ativo = false;
      alert("Game Over! Pontos: " + score);
    }
  });

  bolas = bolas.filter(b => b.y < canvas.height + 50);

  // Criar bolas
  if (Math.random() < 0.03) criarBola();

  // PontuaÃ§Ã£o
  score++;
  if (score % 300 === 0) velocidade++;
  document.getElementById("score").innerText = score;

  requestAnimationFrame(loop);
}

// Controles teclado
document.addEventListener("keydown", e => {
  if (!ativo) return;
  if (e.key === "ArrowLeft" && jogador.x > 0) jogador.x -= 20;
  if (e.key === "ArrowRight" && jogador.x < canvas.width - jogador.w) jogador.x += 20;
});

// Controles toque (celular)
canvas.addEventListener("touchmove", e => {
  let touch = e.touches[0];
  let rect = canvas.getBoundingClientRect();
  jogador.x = touch.clientX - rect.left - jogador.w / 2;
});
</script>

</body>
</html>
