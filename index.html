<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Jogos do Lucas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#020617;
  color:#e5e7eb;
  text-align:center
}
h1{
  color:#22c55e;
  margin:15px 0;
}
button{
  padding:12px 22px;
  margin:6px;
  border:none;
  border-radius:10px;
  background:#22c55e;
  color:#020617;
  font-size:16px;
  cursor:pointer;
}
canvas{
  background:#065f46;
  margin:10px auto;
  display:block;
  border:4px solid #14532d;
}
#menu{display:block}
#hud,#gameover{display:none}
</style>
</head>
<body>

<h1>üé± Jogos do Lucas ‚Äî Sinuca</h1>

<div id="menu">
  <p>Clique para jogar</p>
  <button onclick="start()">Iniciar Sinuca</button>
</div>

<div id="hud">
  Pontos: <span id="score">0</span><br>
  <button onclick="restart()">üîÅ Reiniciar</button>
</div>

<div id="gameover">
  <h2>Fim de jogo</h2>
  <p>Bolas enca√ßapadas: <span id="final"></span></p>
  <button onclick="restart()">Jogar novamente</button>
</div>

<canvas id="game" width="360" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const menu = document.getElementById("menu");
const hud = document.getElementById("hud");
const gameover = document.getElementById("gameover");
const scoreEl = document.getElementById("score");
const finalEl = document.getElementById("final");

let cueBall, balls, pockets;
let score = 0;
let active = false;
let mouse = {x:0,y:0};

/* INICIAR */
function start(){
  menu.style.display="none";
  hud.style.display="block";
  gameover.style.display="none";

  score = 0;
  scoreEl.textContent = 0;

  cueBall = {x:80,y:250,vx:0,vy:0};
  balls = [
    {x:260,y:220,c:"#ef4444",vx:0,vy:0},
    {x:290,y:250,c:"#22c55e",vx:0,vy:0},
    {x:260,y:280,c:"#3b82f6",vx:0,vy:0}
  ];

  pockets = [
    {x:15,y:15},{x:180,y:10},{x:345,y:15},
    {x:15,y:485},{x:180,y:490},{x:345,y:485}
  ];

  active = true;
  loop();
}

function restart(){
  start();
}

function endGame(){
  active = false;
  hud.style.display="none";
  gameover.style.display="block";
  finalEl.textContent = score;
}

/* DESENHO */
function drawBall(b){
  ctx.beginPath();
  ctx.fillStyle = b.c || "#fff";
  ctx.arc(b.x,b.y,10,0,Math.PI*2);
  ctx.fill();
}

/* LOOP */
function loop(){
  if(!active) return;

  ctx.clearRect(0,0,360,500);

  // ca√ßapas
  ctx.fillStyle="#000";
  pockets.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,14,0,Math.PI*2);
    ctx.fill();
  });

  // linha de mira
  if(Math.abs(cueBall.vx)+Math.abs(cueBall.vy)<0.05){
    ctx.strokeStyle="#fff";
    ctx.beginPath();
    ctx.moveTo(cueBall.x,cueBall.y);
    ctx.lineTo(mouse.x,mouse.y);
    ctx.stroke();
  }

  // desenhar bolas
  drawBall(cueBall);
  balls.forEach(drawBall);

  // f√≠sica
  [cueBall,...balls].forEach(b=>{
    b.x += b.vx;
    b.y += b.vy;
    b.vx *= 0.98;
    b.vy *= 0.98;

    if(b.x<10||b.x>350) b.vx*=-1;
    if(b.y<10||b.y>490) b.vy*=-1;
  });

  // colis√£o branca
  balls.forEach(b=>{
    let dx=b.x-cueBall.x;
    let dy=b.y-cueBall.y;
    if(Math.hypot(dx,dy)<20){
      b.vx=dx*0.15;
      b.vy=dy*0.15;
      cueBall.vx*=-0.4;
      cueBall.vy*=-0.4;
    }
  });

  // ca√ßapas
  balls = balls.filter(b=>{
    for(let p of pockets){
      if(Math.hypot(b.x-p.x,b.y-p.y)<14){
        score++;
        scoreEl.textContent = score;
        return false;
      }
    }
    return true;
  });

  if(balls.length===0) endGame();

  requestAnimationFrame(loop);
}

/* CONTROLES */
canvas.onmousemove=e=>{
  mouse.x=e.offsetX;
  mouse.y=e.offsetY;
};

canvas.onclick=()=>{
  let dx=cueBall.x-mouse.x;
  let dy=cueBall.y-mouse.y;
  cueBall.vx=dx*0.12;
  cueBall.vy=dy*0.12;
};
</script>

</body>
</html>
