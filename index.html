<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Jogos do Lucas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:radial-gradient(circle at top,#020617,#000);
  color:#e5e7eb;
  text-align:center
}
h1{
  color:#22c55e;
  text-shadow:0 0 15px #22c55e;
  margin-top:10px
}
button{
  padding:12px 22px;
  margin:6px;
  border:none;
  border-radius:12px;
  background:#22c55e;
  color:#020617;
  font-size:16px;
  cursor:pointer;
  box-shadow:0 0 15px #22c55e;
}
button:hover{transform:scale(1.05)}
canvas{
  background:#020617;
  margin:15px auto;
  display:block;
  border:2px solid #22c55e;
  box-shadow:0 0 25px #22c55e;
}
#menu,#hud,#gameover{display:none}
</style>
</head>
<body>

<h1>üéÆ Jogos do Lucas</h1>

<div id="menu">
  <p>Escolha um jogo</p>
  <button onclick="start(1)">Desvie das Bolas</button>
  <button onclick="start(2)">Pong Arcade</button>
  <button onclick="start(3)">Clique Fren√©tico</button>
  <button onclick="start(4)">Coletar Estrelas</button>
</div>

<div id="hud">
  Pontos: <span id="score">0</span>
  <br>
  <button onclick="toggleSound()">üîä Som</button>
  <button onclick="menu()">‚¨Ö Menu</button>
</div>

<div id="gameover">
  <h2>üíÄ Game Over</h2>
  <p>Pontua√ß√£o: <span id="final"></span></p>
  <button onclick="restart()">üîÅ Reiniciar</button>
  <button onclick="menu()">‚¨Ö Menu</button>
</div>

<canvas id="game" width="360" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const menuDiv = document.getElementById("menu");
const hud = document.getElementById("hud");
const gameoverDiv = document.getElementById("gameover");
const scoreEl = document.getElementById("score");
const finalEl = document.getElementById("final");

let game=0, score=0, active=false, sound=true;
let player={}, items=[], ball={}, lastGame=0, speed=1;

/* ==== AUDIO ==== */
let audioCtx=null;
function initAudio(){
  if(audioCtx) return;
  audioCtx=new (window.AudioContext||window.webkitAudioContext)();
}
function beep(freq=500){
  if(!sound||!audioCtx) return;
  const o=audioCtx.createOscillator();
  const g=audioCtx.createGain();
  g.gain.value=0.04;
  o.frequency.value=freq;
  o.connect(g); g.connect(audioCtx.destination);
  o.start();
  o.stop(audioCtx.currentTime+0.1);
}
function toggleSound(){sound=!sound}

/* ==== MENU ==== */
menu();
function menu(){
  active=false;
  menuDiv.style.display="block";
  hud.style.display="none";
  gameoverDiv.style.display="none";
}

/* ==== START ==== */
function start(n){
  initAudio();
  lastGame=n;
  game=n; score=0; speed=1;
  scoreEl.textContent=0;
  menuDiv.style.display="none";
  hud.style.display="block";
  gameoverDiv.style.display="none";
  active=true;
  items=[];

  if(n===1||n===4){
    player={x:160,y:440,w:40,h:40};
  }
  if(n===2){
    player={y:210,h:80};
    ball={x:180,y:250,vx:4,vy:4,r:8};
  }
  loop();
}

function restart(){ start(lastGame); }

function endGame(){
  active=false;
  finalEl.textContent=score;
  hud.style.display="none";
  gameoverDiv.style.display="block";
  beep(180);
}

/* ==== COLIS√ÉO REAL (C√çRCULO x RET√ÇNGULO) ==== */
function circleRectCollision(cx,cy,cr,rx,ry,rw,rh){
  const testX = Math.max(rx, Math.min(cx, rx+rw));
  const testY = Math.max(ry, Math.min(cy, ry+rh));
  const distX = cx - testX;
  const distY = cy - testY;
  return (distX*distX + distY*distY) <= cr*cr;
}

/* ==== JOGO 1: DESVIE DAS BOLAS (FIXADO) ==== */
function gameAvoid(){
  speed+=0.001;

  if(Math.random()<0.03){
    items.push({
      x:Math.random()*320+20,
      y:-20,
      r:12
    });
  }

  // player
  ctx.fillStyle="#22c55e";
  ctx.fillRect(player.x,player.y,player.w,player.h);

  // bolas
  ctx.fillStyle="#ef4444";
  items.forEach(b=>{
    b.y += 4*speed;
    ctx.beginPath();
    ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
    ctx.fill();

    if(
      circleRectCollision(
        b.x,b.y,b.r,
        player.x,player.y,player.w,player.h
      )
    ){
      endGame();
    }
  });
}

/* ==== JOGO 2: PONG ==== */
function gamePong(){
  ctx.fillStyle="#22c55e";
  ctx.fillRect(20,player.y,10,player.h);

  ctx.fillRect(350,0,5,500);

  ctx.beginPath();
  ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
  ctx.fill();

  ball.x+=ball.vx;
  ball.y+=ball.vy;

  if(ball.y<ball.r||ball.y>500-ball.r){
    ball.vy*=-1;
    beep(300);
  }

  if(ball.x>350-ball.r){
    ball.vx*=-1;
  }

  if(
    ball.x-ball.r<30 &&
    ball.y>player.y &&
    ball.y<player.y+player.h
  ){
    ball.vx*=-1;
    score++;
    beep(600);
  }

  if(ball.x<0) endGame();
}

/* ==== JOGO 3 ==== */
function gameClick(){
  ctx.fillStyle="#22c55e";
  ctx.fillRect(90,210,180,80);
  ctx.fillStyle="#020617";
  ctx.font="22px Arial";
  ctx.fillText("CLIQUE!",135,260);
}

/* ==== JOGO 4 ==== */
function gameCollect(){
  if(Math.random()<0.03){
    items.push({x:Math.random()*330,y:-20});
  }

  ctx.fillStyle="#22c55e";
  ctx.fillRect(player.x,player.y,40,40);
  ctx.fillStyle="#facc15";

  items.forEach(i=>{
    i.y+=3;
    ctx.fillRect(i.x,i.y,15,15);
    if(i.y>player.y){
      score++;
      beep(700);
      i.y=600;
    }
  });
}

/* ==== LOOP ==== */
function loop(){
  if(!active) return;
  ctx.clearRect(0,0,360,500);
  scoreEl.textContent=score;

  if(game===1) gameAvoid();
  if(game===2) gamePong();
  if(game===3) gameClick();
  if(game===4) gameCollect();

  requestAnimationFrame(loop);
}

/* ==== CONTROLES ==== */
document.addEventListener("mousemove",e=>{
  if(player.x!==undefined) player.x=e.offsetX;
  if(game===2) player.y=e.offsetY-40;
});
canvas.onclick=()=>{
  if(game===3){ score++; beep(650); }
};
</script>

</body>
</html>
